<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BGM: Beautiful in White (Instrumental)</title>
<style>
  :root{
    --bg:#323232;
    --fg:#e8e8e8;
    --muted-fg:#9a9a9a;
    --accent:#6ee17a;
    --radius:12px;
  }

  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background:#f0f0f0;
    font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  }

  .player {
    display:flex;
    align-items:center;
    gap:20px;
    padding:14px 22px;
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.15)), var(--bg);
    color:var(--fg);
    border-radius:var(--radius);
    box-shadow: 0 -2px 10px rgba(255,255,255,0.03), 0 6px 18px rgba(0,0,0,0.35);
  }

  .controls {
    display:flex;
    gap:18px;
    align-items:center;
  }

  .btn {
    background: none;
    border: none;
    padding:6px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    color:var(--fg);
    transition: transform .08s ease, color .15s ease, opacity .12s ease;
    border-radius:8px;
  }
  .btn:active { transform: scale(.96); }
  .btn:hover { opacity: .95; }

  .btn svg { width:24px; height:24px; display:block; fill:currentColor; }

  /* icon swap containers inside button */
  .icon { display:block; }
  .icon.hidden { display:none; }

  /* loop active */
  .loop.active { color: var(--accent); }

  /* muted style */
  .mute.active { color: var(--muted-fg); }

  /* close */
  .close { color: #fff; opacity:.85; background: rgba(255,255,255,0.04); padding:6px; border-radius:10px; }
  .close:hover { opacity:1; }

  /* optional small responsiveness */
  @media (max-width:480px){
    .player { gap:12px; padding:10px 14px; }
    .btn svg { width:20px; height:20px; }
  }
</style>
</head>
<body>

<div class="player" id="player">
  <div class="controls" role="group" aria-label="Audio controls">

    <!-- Play/Pause -->
    <button class="btn playpause" id="playPauseBtn" aria-pressed="false" title="Play / Pause">
      <!-- Play icon -->
      <svg class="icon playIcon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M8 5v14l11-7z"></path>
      </svg>
      <!-- Pause icon (hidden by default) -->
      <svg class="icon pauseIcon hidden" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M6 5h4v14H6zM14 5h4v14h-4z"></path>
      </svg>
    </button>

    <!-- Loop -->
    <button class="btn loop" id="loopBtn" aria-pressed="false" title="Toggle loop">
      <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M7 7h10v2l3-3-3-3v2H6a4 4 0 0 0 0 8h1v-2H7a2 2 0 1 1 0-4zm10 10H7v-2l-3 3 3 3v-2h11a4 4 0 0 0 0-8h-1v2h1a2 2 0 1 1 0 4z"></path>
      </svg>
    </button>

    <!-- Volume / Mute -->
    <button class="btn mute" id="volumeBtn" aria-pressed="false" title="Mute / Unmute">
      <!-- Volume icon -->
      <svg class="icon volIcon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M3 10v4h4l5 5V5L7 10H3z"></path>
        <path d="M16.5 12c0-1.77-1-3.29-2.5-4.03v8.06c1.5-.74 2.5-2.26 2.5-4.03z"></path>
      </svg>
      <!-- Muted icon -->
      <svg class="icon muteIcon hidden" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M16.5 12c0-1.77-1-3.29-2.5-4.03v8.06c1.5-.74 2.5-2.26 2.5-4.03z" opacity=".0001"></path>
        <path d="M21 6.41 19.59 5 17 7.59 14.41 5 13 6.41 15.59 9 13 11.59 14.41 13 17 10.41 19.59 13 21 11.59 18.41 9 21 6.41z"></path>
        <path d="M3 10v4h4l5 5V5L7 10H3z"></path>
      </svg>
    </button>

    <!-- Close / Hide -->
    <button class="btn close" id="closeBtn" title="Close player">
      <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M18.3 5.71 12 12l6.3 6.29-1.41 1.42L10.59 13.41 4.29 19.71 2.88 18.29 9.18 12 2.88 5.71 4.29 4.29 10.59 10.59 16.88 4.29z"></path>
      </svg>
    </button>

  </div>
</div>

<!-- audio element using your Elfsight file -->
<audio id="audio"
  src="https://files.elfsightcdn.com/eafe4a4d-3436-495d-b748-5bdce62d911d/d9f8b972-103e-48dc-8d3b-3c188b597993/Wedding-Entrance-X-Beautiful-In-White.mp3"
  preload="auto"></audio>

<script>
(function(){
  const audio = document.getElementById('audio');

  const playPauseBtn = document.getElementById('playPauseBtn');
  const loopBtn = document.getElementById('loopBtn');
  const volumeBtn = document.getElementById('volumeBtn');
  const closeBtn = document.getElementById('closeBtn');

  const playIcon = playPauseBtn.querySelector('.playIcon');
  const pauseIcon = playPauseBtn.querySelector('.pauseIcon');
  const volIcon = volumeBtn.querySelector('.volIcon');
  const muteIcon = volumeBtn.querySelector('.muteIcon');

  // State
  let isPlaying = false;
  let isLooping = false;
  let isMuted = false;

  // Helpers to set icon states
  function setPlaying(playing){
    isPlaying = playing;
    playIcon.classList.toggle('hidden', playing);
    pauseIcon.classList.toggle('hidden', !playing);
    playPauseBtn.setAttribute('aria-pressed', String(playing));
  }

  function setMuted(muted){
    isMuted = muted;
    volIcon.classList.toggle('hidden', muted);
    muteIcon.classList.toggle('hidden', !muted);
    volumeBtn.setAttribute('aria-pressed', String(muted));
    volumeBtn.classList.toggle('active', muted);
  }

  function setLoop(loop){
    isLooping = loop;
    audio.loop = loop;
    loopBtn.classList.toggle('active', loop);
    loopBtn.setAttribute('aria-pressed', String(loop));
  }

  // Play / Pause
  playPauseBtn.addEventListener('click', async () => {
    try{
      if (audio.paused) {
        await audio.play();
        setPlaying(true);
      } else {
        audio.pause();
        setPlaying(false);
      }
    }catch(e){
      // Autoplay blocked — mark as paused
      console.warn('Play blocked', e);
      setPlaying(false);
    }
  });

  // Pause when audio ends (if not loop)
  audio.addEventListener('ended', ()=> setPlaying(false));
  audio.addEventListener('play', ()=> setPlaying(true));
  audio.addEventListener('pause', ()=> setPlaying(false));

  // Loop toggle
  loopBtn.addEventListener('click', () => setLoop(!isLooping));

  // Volume / Mute toggle
  volumeBtn.addEventListener('click', () => {
    setMuted(!isMuted);
    audio.muted = isMuted;
  });

  // Close/hide player
  closeBtn.addEventListener('click', () => {
    audio.pause();
    const p = document.getElementById('player');
    if (p) p.remove();
  });

  // --- Autoplay attempt logic ---
  // Strategy:
  // 1) Start muted and try to play (most browsers allow muted autoplay)
  // 2) If that succeeds, attempt to unmute immediately — this may fail (browsers block unmute)
  // 3) If the unmute is blocked, remain muted and let user unmute
  // This respects browser autoplay policies.
  (async function tryAutoplay(){
    try {
      audio.muted = true;
      await audio.play();                // usually allowed when muted
      setPlaying(true);
      // try unmuting — if browser allows, great; otherwise remain muted
      audio.muted = false;
      // check actual muted state (some browsers silently keep it muted)
      if (audio.muted) {
        setMuted(true);
      } else {
        setMuted(false);
      }
    } catch(err) {
      // autoplay failed (maybe blocked), leave paused and muted state consistent
      console.warn('Autoplay attempt failed:', err);
      setPlaying(false);
      // keep audio.muted as it was (likely false), but present user with control
      setMuted(audio.muted);
    }
  })();

  // Accessibility: keyboard play/pause (space) when focus on player container
  const playerEl = document.getElementById('player');
  playerEl.tabIndex = -1;
  playerEl.addEventListener('keydown', (e)=>{
    if (e.code === 'Space') {
      e.preventDefault();
      playPauseBtn.click();
    }
  });

})();
</script>
</body>
</html>
